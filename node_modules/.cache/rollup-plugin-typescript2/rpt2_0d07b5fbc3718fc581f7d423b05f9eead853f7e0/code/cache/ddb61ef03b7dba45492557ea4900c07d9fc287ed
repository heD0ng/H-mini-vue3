{"code":"import { isArray, isEqual, isObject } from \"../../shared/src/index\";\r\nimport { track, trigger } from \"./effect\";\r\nimport { TriggerOpTypes } from \"./operations\";\r\nimport { reactive } from \"./reactive\";\r\nfunction toReactive(data) {\r\n    if (isObject(data)) {\r\n        return reactive(data);\r\n    }\r\n    return data;\r\n}\r\nvar Ref = /** @class */ (function () {\r\n    function Ref(data) {\r\n        this.rawData = data;\r\n        this._value = toReactive(data);\r\n    }\r\n    Object.defineProperty(Ref.prototype, \"value\", {\r\n        get: function () {\r\n            track(this, 'value', 'get');\r\n            return this._value;\r\n        },\r\n        set: function (newVal) {\r\n            if (!isEqual(this.rawData, newVal)) {\r\n                this._value = toReactive(newVal);\r\n                trigger(this, 'value', TriggerOpTypes.SET, newVal, this.rawData);\r\n                this.rawData = newVal;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return Ref;\r\n}());\r\nexport var ref = function (data) {\r\n    return new Ref(data);\r\n};\r\nvar RefImpl = /** @class */ (function () {\r\n    function RefImpl(target, key) {\r\n        this.target = target;\r\n        this.key = key;\r\n        this.target = target;\r\n        this.key = key;\r\n    }\r\n    Object.defineProperty(RefImpl.prototype, \"value\", {\r\n        get: function () {\r\n            // track(this.target[this.key], 'value')\r\n            return this.target[this.key];\r\n        },\r\n        set: function (newVal) {\r\n            this.target[this.key] = newVal;\r\n            // trigger(this.target[this.key], 'value', TriggerOpTypes.SET, newVal);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return RefImpl;\r\n}());\r\nexport var toRef = function (target, key) {\r\n    return new RefImpl(target, key);\r\n};\r\nexport var toRefs = function (target) {\r\n    var res = null;\r\n    if (!target.__isProxy__) {\r\n        console.warn('toRefs() need a reactive object');\r\n    }\r\n    ;\r\n    res = isArray(target) ? new Array(target.length) : {};\r\n    for (var key in target) {\r\n        res[key] = toRef(target, key);\r\n    }\r\n    return res;\r\n};\r\n//# sourceMappingURL=ref.js.map","references":["D:/frontEnd/Vue3/mini-Vue3/packages/shared/src/index.ts","D:/frontEnd/Vue3/mini-Vue3/packages/reactivity/src/effect.ts","D:/frontEnd/Vue3/mini-Vue3/packages/reactivity/src/operations.ts","D:/frontEnd/Vue3/mini-Vue3/packages/reactivity/src/reactive.ts"],"map":"{\"version\":3,\"file\":\"ref.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/reactivity/src/ref.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,wBAAwB,CAAC;AACpE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,UAAU,CAAC;AAC1C,OAAO,EAAE,cAAc,EAAE,MAAM,cAAc,CAAC;AAC9C,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;AAGtC,SAAS,UAAU,CAAC,IAAI;IACpB,IAAG,QAAQ,CAAC,IAAI,CAAC,EAAE;QACf,OAAO,QAAQ,CAAC,IAAI,CAAC,CAAC;KACzB;IACD,OAAO,IAAI,CAAC;AAChB,CAAC;AACD;IAGI,aAAY,IAAI;QACZ,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IACD,sBAAI,sBAAK;aAAT;YACI,KAAK,CAAC,IAAI,EAAC,OAAO,EAAE,KAAK,CAAC,CAAA;YAC1B,OAAO,IAAI,CAAC,MAAM,CAAC;QACvB,CAAC;aACD,UAAU,MAAM;YACZ,IAAG,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,EAAC;gBAC9B,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC;gBACjC,OAAO,CAAC,IAAI,EAAE,OAAO,EAAE,cAAc,CAAC,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAA;gBAChE,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;aACzB;QACL,CAAC;;;OAPA;IAQL,UAAC;AAAD,CAAC,AAlBD,IAkBC;AACD,MAAM,CAAC,IAAM,GAAG,GAAG,UAAC,IAAI;IACpB,OAAO,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;AACzB,CAAC,CAAA;AAED;IACI,iBAAmB,MAAM,EAAS,GAAG;QAAlB,WAAM,GAAN,MAAM,CAAA;QAAS,QAAG,GAAH,GAAG,CAAA;QACjC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;IACnB,CAAC;IACD,sBAAI,0BAAK;aAAT;YACI,wCAAwC;YACxC,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACjC,CAAC;aACD,UAAU,MAAM;YACZ,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC;YAC/B,uEAAuE;QAC3E,CAAC;;;OAJA;IAKL,cAAC;AAAD,CAAC,AAbD,IAaC;AAED,MAAM,CAAC,IAAM,KAAK,GAAG,UAAC,MAAM,EAAE,GAAG;IAC7B,OAAO,IAAI,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;AACnC,CAAC,CAAA;AACD,MAAM,CAAC,IAAM,MAAM,GAAG,UAAC,MAAM;IACzB,IAAI,GAAG,GAAQ,IAAI,CAAC;IACpB,IAAG,CAAC,MAAM,CAAC,WAAW,EAAE;QACpB,OAAO,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;KACnD;IAAA,CAAC;IACF,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,CAAA,CAAC,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACrD,KAAI,IAAM,GAAG,IAAI,MAAM,EAAE;QACrB,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;KACjC;IACD,OAAO,GAAG,CAAC;AACf,CAAC,CAAA\"}"}
