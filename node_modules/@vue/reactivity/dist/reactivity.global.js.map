{"version":3,"file":"reactivity.global.js","sources":["../../shared/src/index.ts","../src/operations.ts","../src/effect.ts","../src/baseHandler.ts","../src/reactive.ts","../src/ref.ts"],"sourcesContent":["export const isObject = (data) => {\r\n    return data && typeof data === 'object';\r\n}\r\n\r\nexport const isEqual = (val, oldVal) => {\r\n    return val === oldVal;\r\n}\r\n\r\nexport const isArray = (val) => {\r\n    return Array.isArray(val)\r\n}\r\n\r\nexport const isFunction = (val) => {\r\n    return typeof val === 'function';\r\n}\r\nexport const isNumber = (val) => {\r\n    return typeof val === 'number';\r\n}\r\nexport const isString = (val) => {\r\n    return typeof val === 'string';\r\n}\r\n// 判断数组的索引\r\nexport const isIntegerKey = (key) => '' + parseInt(key) === key;\r\n\r\nexport const hasOwn = (target, key) => {\r\n    return Object.prototype.hasOwnProperty.call(target, key);\r\n}\r\n\r\nexport * from './shapeFlags';","// 操作符\r\nexport enum TrackOpTypes {\r\n    GET = 'get',\r\n    HAS = 'has',\r\n    ITERATE = 'iterate'\r\n}\r\n\r\nexport enum TriggerOpTypes {\r\n    SET = 'set',\r\n    ADD = 'add',\r\n    DELETE = 'delete',\r\n    CLEAR = 'clear'\r\n}","import { isArray, isIntegerKey } from './../../shared/src/index';\r\nimport {TriggerOpTypes} from './operations';\r\nlet activeEffect = null;\r\nlet effectList = []\r\n\r\n/**\r\n * \r\n * @param fn \r\n * @param options : {lazy: true}-lazy为true，默认不执行\r\n * @returns \r\n */\r\nconst createReactiveEffect = (fn, options) => {\r\n    return new ReactiveEffect(fn, options);\r\n}\r\nexport const effect = (fn, options:any = {}) => {\r\n    const effect = createReactiveEffect(fn, options);\r\n    if(!options.lazy){\r\n        effect.run();\r\n    }\r\n    \r\n    return effect;\r\n}\r\n\r\n\r\nclass ReactiveEffect {\r\n    fn: Function;\r\n    options: any;\r\n    deps: Array<any>;\r\n    constructor(fn, options){\r\n        this.fn = fn;\r\n        this.deps = []\r\n        this.options = options;\r\n    }\r\n    run() {\r\n        // state.a++: 避免递归收集\r\n        // 当前的实例effect\r\n        if(!effectList.includes(this)) {\r\n            try {\r\n                // 入栈\r\n                activeEffect = this;\r\n                effectList.push(activeEffect);\r\n                console.log(effectList);\r\n                // cleanActiveEffectDeps(activeEffect);\r\n                return this.fn()\r\n            } finally  {\r\n                // 出栈\r\n                effectList.pop()\r\n                activeEffect = effectList[effectList.length - 1] || null;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction cleanActiveEffectDeps(activeEffect) {\r\n    const {deps} = activeEffect;\r\n    for(const dep of deps) {\r\n        dep.delete(activeEffect)\r\n    }\r\n\r\n    activeEffect.deps.length = 0;\r\n}\r\n\r\nlet targetMap = new WeakMap();\r\nexport function track(target, key, type?) {\r\n    if(!activeEffect) return;\r\n\r\n    let depsMap = targetMap.get(target);\r\n    if(!depsMap) {\r\n        depsMap = new Map()\r\n        targetMap.set(target, depsMap);\r\n        \r\n    }\r\n    let effectSet = depsMap.get(key)\r\n    if(!effectSet) {\r\n        effectSet = new Set();\r\n        depsMap.set(key, effectSet);\r\n    }\r\n    if(!effectSet.has(activeEffect)){\r\n        effectSet.add(activeEffect);\r\n    }\r\n}\r\n/**\r\n * \r\n * @param target \r\n * @param key \r\n * @param type \r\n * @param value \r\n * @param oldVal \r\n * @returns \r\n * depsMap: {\r\n *  0: [e1, e2],\r\n *  length: [e2, e3]\r\n * }\r\n */\r\nexport const trigger = (target, key, type='get', value?, oldVal?) => {\r\n    const depsMap = targetMap.get(target);\r\n    if(!depsMap) return;\r\n    const effectSet:any = depsMap.get(key);\r\n    if(effectSet) {\r\n        if(isArray(target) && key === 'length') {\r\n            // state.list.length = 1; [1,2,3] => 1 => 2、3改变了，所以需要重新触发effect\r\n            depsMap.forEach((val, mapKey) => {\r\n                if(mapKey === 'length' || mapKey >= value) {\r\n                    val.forEach(cur => {\r\n                        if(cur !== activeEffect) {\r\n                            console.log(cur);\r\n                            cur.run();\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        } else {\r\n            // 深克隆\r\n            const tmp: any= new Set(effectSet);\r\n            switch(type) {\r\n                case TriggerOpTypes.ADD:\r\n                    // state.list[100] = 100;\r\n                    // 索引变化 => 长度变化;\r\n                    if(isArray(target) && isIntegerKey(key)) {\r\n                        depsMap.get('length').forEach(cur => {\r\n                            if(cur !== activeEffect) {\r\n                                console.log(cur);\r\n                                cur.run();\r\n                            }\r\n                        })\r\n                    }\r\n                    break;\r\n                case TriggerOpTypes.SET:\r\n                    // 修改值：state.list[4] = 4;\r\n                    depsMap.get(key).forEach(cur => {\r\n                        if(cur !== activeEffect) {\r\n                            console.log(cur);\r\n                            cur.run();\r\n                        }\r\n                    })\r\n            }\r\n        }\r\n    }\r\n    console.log(targetMap);\r\n}","/**\r\n * 示例代码：const state = reactive({list: [1,2,3], {name: {a: 1}}})\r\n */\r\nimport { isObject, isEqual, isArray, isIntegerKey, hasOwn } from './../../shared/src/index';\r\nimport { reactive, readonly } from './reactive';\r\nimport { TrackOpTypes, TriggerOpTypes } from './operations';\r\nimport {track, trigger} from './effect'\r\nexport const reactiveHandler = {\r\n    get(target, key, receiver) {\r\n        if(key === \"__isProxy__\") return true;\r\n        const res = Reflect.get(target, key, receiver)\r\n        // 收集依赖\r\n        track(target, key, TrackOpTypes.GET);\r\n        if(isObject(res)) return reactive(res);\r\n        return res;\r\n    },\r\n    set(target, key, value, newValue) {\r\n        const oldVal = target[key]\r\n        const res = Reflect.set(target, key, value, newValue);\r\n        // 触发回调\r\n        // 前者：修改；后者：新增\r\n        const hasKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key)\r\n        if(!hasKey) {\r\n            // 新增/删减\r\n            trigger(target, key, TriggerOpTypes.ADD)\r\n        } else {\r\n            // 修改\r\n            if(!isEqual(res, oldVal)) {\r\n                trigger(target, key, TriggerOpTypes.SET)\r\n            }\r\n            \r\n        }\r\n        if(isObject(res)) reactive(res);\r\n    }\r\n};\r\nexport const shallowReactiveHandler = {};\r\nexport const readonlyHandler = {\r\n    get(target, key, receiver){\r\n        const res = Reflect.get(target, key, receiver);\r\n        if(isObject(res)) return readonly(res);\r\n        return res;\r\n    },\r\n    set() {\r\n        console.error('readonly can not be set')\r\n    }\r\n};\r\nexport const shallowReadonlyHandler = {};","// import { isObject } from \"@vue/shared\";\r\nimport { isObject } from \"../../shared/src/index\";\r\nimport {reactiveHandler, shallowReactiveHandler, readonlyHandler, shallowReadonlyHandler} from './baseHandler'\r\n\r\nexport const reactive = (target: any) => {\r\n    return createReactiveObj(target, false, reactiveHandler)\r\n}\r\nexport const shallowReactive = (target: any) => {\r\n    return createReactiveObj(target, false, shallowReactiveHandler)\r\n}\r\n\r\nexport const readonly = (target) => {\r\n    return createReactiveObj(target, true, readonlyHandler)\r\n}\r\nexport const shallowReadonly = (target: any) => {\r\n    return createReactiveObj(target, true, shallowReadonlyHandler)\r\n}\r\n\r\n/**\r\n * \r\n * @param target: 代理的数据\r\n * @param isReadonly：是否只读 \r\n * @param baseHandler：Proxy对应的handler对象\r\n */\r\nconst reactiveMap = new WeakMap();\r\nconst readonlyMap = new WeakMap()\r\nfunction createReactiveObj(target, isReadonly, baseHandler) {\r\n    // 利用get属性也可以处理递归;\r\n    // if(target.__isProxy__) return target;\r\n    if(!isObject(target)) {\r\n        return target;\r\n    }\r\n    const proxyMap = isReadonly ? readonlyMap : reactiveMap;\r\n    if(proxyMap.get(target)) {\r\n        return proxyMap.get(target);\r\n    }\r\n    const proxy = new Proxy(target, baseHandler);\r\n    proxyMap.set(target, proxy);\r\n    return proxy;\r\n}","import { isArray, isEqual, isObject } from \"../../shared/src/index\";\r\nimport { track, trigger } from \"./effect\";\r\nimport { TriggerOpTypes } from \"./operations\";\r\nimport { reactive } from \"./reactive\";\r\n\r\n\r\nfunction toReactive(data) {\r\n    if(isObject(data)) {\r\n        return reactive(data);\r\n    }\r\n    return data;\r\n}\r\nclass Ref {\r\n    rawData: any;\r\n    _value: any;\r\n    constructor(data) {\r\n        this.rawData = data;\r\n        this._value = toReactive(data);\r\n    }\r\n    get value() {\r\n        track(this,'value', 'get')\r\n        return this._value;\r\n    }\r\n    set value(newVal) {\r\n        if(!isEqual(this.rawData, newVal)){\r\n            this._value = toReactive(newVal);\r\n            trigger(this, 'value', TriggerOpTypes.SET, newVal, this.rawData)\r\n            this.rawData = newVal;\r\n        }\r\n    }\r\n}\r\nexport const ref = (data) => {\r\n    return new Ref(data);\r\n}\r\n\r\nclass RefImpl {\r\n    constructor(public target, public key) {\r\n        this.target = target;\r\n        this.key = key;\r\n    }\r\n    get value() {\r\n        // track(this.target[this.key], 'value')\r\n        return this.target[this.key];\r\n    }\r\n    set value(newVal) {\r\n        this.target[this.key] = newVal;\r\n        // trigger(this.target[this.key], 'value', TriggerOpTypes.SET, newVal);\r\n    }\r\n}\r\n\r\nexport const toRef = (target, key) => {\r\n    return new RefImpl(target, key)\r\n}\r\nexport const toRefs = (target) => {\r\n    let res: any = null;\r\n    if(!target.__isProxy__) {\r\n        console.warn('toRefs() need a reactive object');\r\n    };\r\n    res = isArray(target)? new Array(target.length) : {};\r\n    for(const key in target) {\r\n        res[key] = toRef(target, key);\r\n    }\r\n    return res;\r\n}"],"names":[],"mappings":"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"}