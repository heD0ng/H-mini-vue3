{"version":3,"file":"runtime-dom.global.js","sources":["../src/modules/class.ts","../src/modules/event.ts","../src/modules/attr.ts","../src/patchProps.ts","../src/nodeOps.ts","../../shared/src/index.ts","../../runtime-core/src/createVNode.ts","../../runtime-core/src/apiCreateApp.ts","../../runtime-core/src/componentPublicInstance.ts","../../reactivity/src/operations.ts","../../reactivity/src/effect.ts","../../runtime-core/src/component.ts","../../runtime-core/src/render.ts","../src/index.ts"],"sourcesContent":["export const patchClass = (el, value) => {\r\n    if(!value) value = '';\r\n    el.className = value;\r\n}","export const patchEvent = (el, key, fn) => {\r\n    // vei = vue event invoker\r\n    if(!el._vei) {\r\n        el._vei = {};\r\n    }\r\n    const invokers = el._vei || {};\r\n    if(!fn) {\r\n        if(invokers[key]) {\r\n            const name = key.slice(2).toLowerCase();\r\n            el.removeEventListener(name, invokers[key]);\r\n            delete invokers[key];\r\n        }\r\n    } else {\r\n        if(!invokers[key]) {\r\n            const name = key.slice(2).toLowerCase();\r\n            let invoke = invokers[key] = createInvoker(fn);\r\n            el.addEventListener(name, invoke)\r\n        } else {\r\n            // value保存的是上一次的函数;\r\n            invokers[key].value = fn;\r\n        }\r\n    }\r\n}\r\n\r\nfunction createInvoker(fn) {\r\n    const tmp = (e) => {\r\n        tmp.value(e);\r\n        // fn.call(e);\r\n    }\r\n    tmp.value = fn;\r\n    return tmp;\r\n}","export const patchAttr = (el, key, value = '') => {\r\n    if(!value) el.removeAttribute(key); \r\n    el.setAttribute(key, value);\r\n}","import {patchAttr,patchClass, patchEvent, patchStyle} from './modules/index';\r\nexport const patchProp = (el, key, newVal, oldVal) => {\r\n    switch (key) {\r\n        case 'class':{\r\n            patchClass(el, newVal)\r\n            break;\r\n        }\r\n        case 'style': {\r\n            break;\r\n        }\r\n        default:{\r\n            if (/^on[A-Z]/.test(key)) {\r\n                patchEvent(el, key, newVal);\r\n            } else {\r\n                patchAttr(el, key, newVal);\r\n            }\r\n            break;\r\n        }\r\n            \r\n    }\r\n}","export const nodeOps = {\r\n    createElement: (tagName:string) => {\r\n        return document.createElement(tagName);\r\n    },\r\n    insert: (child, parent, anchor=null) => {\r\n        parent.insertBefore(child, anchor);\r\n    },\r\n    remove: (node) => {\r\n        const parentNode = node.parentNode;\r\n        if (parentNode) {\r\n            parentNode.removeChild(node);\r\n        }\r\n    },\r\n    createTextNode: (text) => {\r\n        return document.createTextNode(text);\r\n    },\r\n    querySelector: (selector) => {\r\n        return document.querySelector(selector);\r\n    },\r\n    setElementText: (el, text) => {\r\n        el.nodeValue = text;\r\n    },\r\n    parentNode: node => node.parentNode,\r\n    nextSibling: node => node.nextSibling,\r\n    setText: (el, text) => {\r\n        el.textContent = text;\r\n    },\r\n} ","export const isObject = (data) => {\r\n    return data && typeof data === 'object';\r\n}\r\n\r\nexport const isEqual = (val, oldVal) => {\r\n    return val === oldVal;\r\n}\r\n\r\nexport const isArray = (val) => {\r\n    return Array.isArray(val)\r\n}\r\n\r\nexport const isFunction = (val) => {\r\n    return typeof val === 'function';\r\n}\r\nexport const isNumber = (val) => {\r\n    return typeof val === 'number';\r\n}\r\nexport const isString = (val) => {\r\n    return typeof val === 'string';\r\n}\r\n// 判断数组的索引\r\nexport const isIntegerKey = (key) => '' + parseInt(key) === key;\r\n\r\nexport const hasOwn = (target, key) => {\r\n    return Object.prototype.hasOwnProperty.call(target, key);\r\n}\r\n\r\nexport * from './shapeFlags';","import { isArray, isObject } from './../../shared/src/index';\r\nimport { ShapeFlags } from \"../../shared/src/shapeFlags\";\r\nimport { isString } from \"../../shared/src/index\";\r\nexport function createVNode(type, props, children = null) {\r\n    let shapeFlag = 0;\r\n\t// div\\p\r\n\tif(isString(type)) {\r\n\t\tshapeFlag = ShapeFlags.ELEMENT;\r\n\t} else if(isObject(type)) {\r\n\t\tshapeFlag = ShapeFlags.STATEFUL_COMPONENT;\r\n\t} else {\r\n        shapeFlag = 0;\r\n    }\r\n\r\n    const vnode = {\r\n        type,\r\n        props,\r\n        children,\r\n        key: props?.key,\r\n        shapeFlag\r\n    }\r\n    normalizeChildren(vnode, children);\r\n    return vnode;\r\n}\r\n\r\nfunction normalizeChildren (vnode, children) {\r\n    let type = 0;\r\n    if(children) {\r\n        if(isArray(children)) {\r\n            type = ShapeFlags.ARRAY_CHILDREN;\r\n        } else if(isString(children)) {\r\n            type = ShapeFlags.TEXT_CHILDREN;\r\n        } else {\r\n            console.log(children);\r\n        }\r\n    }\r\n    vnode.shapeFlag = vnode.shapeFlag | type;\r\n\r\n}\r\n","import { createVNode } from \"./createVNode\";\r\n\r\nexport function apiCreateApp(render) {\r\n    return function createApp (rootComponent, rootProps) {\r\n        let app = {\r\n            mount (container) {\r\n                let vnode: any = createVNode(rootComponent, rootProps);\r\n                render(vnode, container);\r\n                vnode._container = container;\r\n            }\r\n        }\r\n        return app;\r\n    }\r\n}","import { hasOwn } from \"../../shared/src/index\";\r\n\r\nexport const componentPublicInstance: any = {\r\n    get(target, key) {\r\n        const instance = target._;\r\n        const {props, setupState, data} = instance;\r\n        if(hasOwn(setupState, key)) {\r\n            return setupState[key];\r\n        } else if (hasOwn(props, key)) {\r\n            return props[key];\r\n        } else if(hasOwn(data, key)) {\r\n            return data[key];\r\n        }\r\n    },\r\n    set(target, key, value) {\r\n\r\n    }\r\n}","// 操作符\r\nexport enum TrackOpTypes {\r\n    GET = 'get',\r\n    HAS = 'has',\r\n    ITERATE = 'iterate'\r\n}\r\n\r\nexport enum TriggerOpTypes {\r\n    SET = 'set',\r\n    ADD = 'add',\r\n    DELETE = 'delete',\r\n    CLEAR = 'clear'\r\n}","import { isArray, isIntegerKey } from './../../shared/src/index';\r\nimport {TriggerOpTypes} from './operations';\r\nlet activeEffect = null;\r\nlet effectList = []\r\n\r\n/**\r\n * \r\n * @param fn \r\n * @param options : {lazy: true}-lazy为true，默认不执行\r\n * @returns \r\n */\r\nconst createReactiveEffect = (fn, options) => {\r\n    return new ReactiveEffect(fn, options);\r\n}\r\nexport const effect = (fn, options:any = {}) => {\r\n    const effect = createReactiveEffect(fn, options);\r\n    if(!options.lazy){\r\n        effect.run();\r\n    }\r\n    \r\n    return effect;\r\n}\r\n\r\n\r\nclass ReactiveEffect {\r\n    fn: Function;\r\n    options: any;\r\n    deps: Array<any>;\r\n    constructor(fn, options){\r\n        this.fn = fn;\r\n        this.deps = []\r\n        this.options = options;\r\n    }\r\n    run() {\r\n        // state.a++: 避免递归收集\r\n        // 当前的实例effect\r\n        if(!effectList.includes(this)) {\r\n            try {\r\n                // 入栈\r\n                activeEffect = this;\r\n                effectList.push(activeEffect);\r\n                console.log(effectList);\r\n                // cleanActiveEffectDeps(activeEffect);\r\n                return this.fn()\r\n            } finally  {\r\n                // 出栈\r\n                effectList.pop()\r\n                activeEffect = effectList[effectList.length - 1] || null;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction cleanActiveEffectDeps(activeEffect) {\r\n    const {deps} = activeEffect;\r\n    for(const dep of deps) {\r\n        dep.delete(activeEffect)\r\n    }\r\n\r\n    activeEffect.deps.length = 0;\r\n}\r\n\r\nlet targetMap = new WeakMap();\r\nexport function track(target, key, type?) {\r\n    if(!activeEffect) return;\r\n\r\n    let depsMap = targetMap.get(target);\r\n    if(!depsMap) {\r\n        depsMap = new Map()\r\n        targetMap.set(target, depsMap);\r\n        \r\n    }\r\n    let effectSet = depsMap.get(key)\r\n    if(!effectSet) {\r\n        effectSet = new Set();\r\n        depsMap.set(key, effectSet);\r\n    }\r\n    if(!effectSet.has(activeEffect)){\r\n        effectSet.add(activeEffect);\r\n    }\r\n}\r\n/**\r\n * \r\n * @param target \r\n * @param key \r\n * @param type \r\n * @param value \r\n * @param oldVal \r\n * @returns \r\n * depsMap: {\r\n *  0: [e1, e2],\r\n *  length: [e2, e3]\r\n * }\r\n */\r\nexport const trigger = (target, key, type='get', value?, oldVal?) => {\r\n    const depsMap = targetMap.get(target);\r\n    if(!depsMap) return;\r\n    const effectSet:any = depsMap.get(key);\r\n    if(effectSet) {\r\n        if(isArray(target) && key === 'length') {\r\n            // state.list.length = 1; [1,2,3] => 1 => 2、3改变了，所以需要重新触发effect\r\n            depsMap.forEach((val, mapKey) => {\r\n                if(mapKey === 'length' || mapKey >= value) {\r\n                    val.forEach(cur => {\r\n                        if(cur !== activeEffect) {\r\n                            console.log(cur);\r\n                            cur.run();\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        } else {\r\n            // 深克隆\r\n            const tmp: any= new Set(effectSet);\r\n            switch(type) {\r\n                case TriggerOpTypes.ADD:\r\n                    // state.list[100] = 100;\r\n                    // 索引变化 => 长度变化;\r\n                    if(isArray(target) && isIntegerKey(key)) {\r\n                        depsMap.get('length').forEach(cur => {\r\n                            if(cur !== activeEffect) {\r\n                                console.log(cur);\r\n                                cur.run();\r\n                            }\r\n                        })\r\n                    }\r\n                    break;\r\n                case TriggerOpTypes.SET:\r\n                    // 修改值：state.list[4] = 4;\r\n                    depsMap.get(key).forEach(cur => {\r\n                        if(cur !== activeEffect) {\r\n                            console.log(cur);\r\n                            cur.run();\r\n                        }\r\n                    })\r\n            }\r\n        }\r\n    }\r\n    console.log(targetMap);\r\n}","// import { isObject } from '@vue/shared';\r\nimport { isObject } from '../../shared/src/index';\r\nimport { componentPublicInstance } from './componentPublicInstance';\r\nimport { ShapeFlags } from \"../../shared/src/shapeFlags\";\r\nimport { isFunction } from '../../shared/src/index';\r\nimport { effect } from '../../reactivity/src/effect';\r\nexport function mountComponent(vnode, container) {\r\n    const instance = vnode.component = createComponentInstance(vnode);\r\n    return instance;\r\n}\r\n// 创建组件实例\r\nexport function createComponentInstance(vnode) {\r\n    const instance = {\r\n        vnode,\r\n        type: {},\r\n        props: {},\r\n        attrs: {},\r\n        setupState: {},\r\n        ctx: {},\r\n        proxy: {},\r\n        // 判断是否是第一次加载\r\n        isMounted: false\r\n    }\r\n    instance.ctx = {_: instance};\r\n    return instance;\r\n}\r\n\r\n// 解析数据到组件中\r\nexport function setupComponent(instance) {\r\n    const {props, children, type} = instance.vnode;\r\n    instance.type = type;\r\n    instance.props = props;\r\n    instance.children = children;\r\n    let isStateFul = instance.vnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT;\r\n    if (isStateFul) {\r\n        setupStateComponent(instance)\r\n    }\r\n}\r\n\r\nfunction setupStateComponent(instance) {\r\n    instance.proxy = new Proxy(instance.ctx, componentPublicInstance);\r\n    const setup = instance?.type?.setup || null;\r\n    let context = createContext(instance);\r\n    if (setup) {\r\n        const res = setup(instance.props, context);\r\n        if(isObject(res)) {\r\n            instance.setupState = res;\r\n        } else if(isFunction(res)) {\r\n            instance.render = res;\r\n        } else {\r\n            return console.warn('the return value of setup should be a function or object!');\r\n        }\r\n    }\r\n    finishComponentSetup(instance);\r\n    // instance.render(instance.proxy);\r\n}\r\n// 数据改变重新触发render函数\r\nexport function setupRenderEffect(instance) {\r\n    effect(function() {\r\n        // 判断是不是第一次加载\r\n        if(!instance.isMounted) {\r\n            instance.render.call(instance.proxy, instance.proxy);\r\n        }\r\n    })\r\n}\r\n\r\nexport function createContext(instance) {\r\n    return {\r\n        props: instance.props,\r\n        slots: instance.slots,\r\n        emits: () => {},\r\n        attrs: instance.attrs,\r\n        expose: () => {}\r\n    }\r\n}\r\n\r\nfunction finishComponentSetup(instance) {\r\n    let Component = instance.vnode.component;\r\n    console.log(Component, instance, 5555);\r\n    if(!instance.render) {\r\n        if(!Component.render && Component.template) {\r\n            // 模板编译\r\n            // Component.render = \r\n        }\r\n        instance.render = Component.render;\r\n    }\r\n}","import { apiCreateApp } from \"./apiCreateApp\";\r\nimport { mountComponent, setupComponent, setupRenderEffect } from \"./component\";\r\n\r\nexport function createRender(renderOptionDom) {\r\n    let render = (vnode, container) => {\r\n        patch(null, vnode, container)\r\n    }\r\n    return {\r\n        createApp: apiCreateApp(render)\r\n    }\r\n}\r\n\r\nfunction patch(n1, n2, container) {\r\n    if(!n1) {\r\n        const instance = mountComponent(n2, container);\r\n        setupComponent(instance);\r\n        setupRenderEffect(instance);\r\n    } else {\r\n\r\n    }\r\n}","import { patchProp } from './patchProps';\r\nimport { nodeOps } from './nodeOps';\r\nimport { createRender } from '../../runtime-core/src/render';\r\nconst renderOptionDom = Object.assign({}, {patchProp}, nodeOps);\r\n\r\nexport const createApp = (rootComponent, rootProps) => {\r\n    const app = createRender(renderOptionDom).createApp(rootComponent, rootProps)\r\n    const {mount} = app;\r\n    app.mount = (container) => {\r\n        // 先清空、后挂载\r\n        const el = renderOptionDom.querySelector(container);\r\n        el.innerHTML = '';\r\n        mount(container);\r\n    }\r\n    return app;\r\n}\r\n"],"names":[],"mappings":"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"}